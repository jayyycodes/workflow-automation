
/**
 * Web Scraping Steps
 */
const scrapeGithub = async (params) => {
    const result = await webScraper.scrapeWeb('github', {
        username: params.username || params.github_username,
        repo_type: params.repo_type || 'stars'
    });
    logger.info('GitHub scrape completed', { username: params.username, items: result.data.items.length });
    return result.data;
};

const scrapeHackerNews = async (params) => {
    const result = await webScraper.scrapeWeb('hackernews', {
        story_type: params.story_type || 'top',
        count: params.count || 10
    });
    logger.info('HackerNews scrape completed', { story_type: params.story_type, items: result.data.items.length });
    return result.data;
};

const formatWebDigest = async (params, context) => {
    const provider = params.provider;
    const previousStep = context.stepOutputs?.['step_1'];
    
    if (!previousStep) {
        throw new Error('No step_1 data');
    }
    
    const formatted = await webScraper.formatDigest(provider, previousStep);
    return { digest: formatted };
};
